{% extends "layout.html" %}
{% block content %}
  <style>
    .title{text-align:center; line-height:1.3; margin-top:4px;}
    .title h1{margin:0; font-size:28px; font-weight:800;}
    .title h2{margin:2px 0 18px; font-size:20px; font-weight:800; color:#475569;}
    .version{display:flex; justify-content:center; margin-bottom:18px;}
    .chip{min-width:280px; text-align:center; border:1px solid #e2e8f0; background:#fff; padding:8px 12px; border-radius:10px; color:#475569;}

    .grid{display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:18px; margin-top:6px;}
    @media (max-width:1200px){ .grid{grid-template-columns:repeat(3,1fr);} }
    @media (max-width:900px){ .grid{grid-template-columns:repeat(2,1fr);} }
    .card{background:#fff; border:1px solid #e2e8f0; border-radius:14px; padding:18px 14px; text-align:center; transition:.15s ease; display:flex; flex-direction:column; align-items:center; gap:10px;}
    .card:hover{transform:translateY(-2px); border-color:#bfe7ff; background:#fff;}
    .card img{width:64px; height:64px; object-fit:contain; display:block;}
    .card .label{font-weight:700;}
  </style>

  <div class="title">
    <h1>Database Vulnerability Scans</h1>
    <h2>DBVulScans</h2>
  </div>

  <div class="version">
    <div class="chip">
      {% if versions and versions|length %}
        {{ versions|join(' • ') }}
      {% else %}
        No version data
      {% endif %}
    </div>
  </div>

  <section class="grid">
    <a class="card" href="/checkpoints">
      <img src="/static/img/icon_checkpoints_large.png" alt="CheckPoints icon" />
      <div class="label">Checkpoints</div>
    </a>
    <a class="card" href="/benchmarks">
      <img src="/static/img/icon_benchmarks_large.png" alt="Benchmarks icon" />
      <div class="label">Benchmarks</div>
    </a>
    <a class="card" href="/assessments">
      <img src="/static/img/icon_assessments_large.png" alt="Assessments icon" />
      <div class="label">Assessments</div>
    </a>
    <a class="card" href="/assessment-analysis">
      <img src="/static/img/icon_assessment_analysis_large.png" alt="Assessment Analysis icon" />
      <div class="label">Assessment Analysis</div>
    </a>

    <a class="card" href="/queries">
      <img src="/static/img/icon_queries_large.png" alt="Queries icon" />
      <div class="label">Queries</div>
    </a>
    <a class="card" href="/querysets">
      <img src="/static/img/icon_querysets_large.png" alt="Query Sets icon" />
      <div class="label">Query Sets</div>
    </a>
    <a class="card" href="/reports">
      <img src="/static/img/icon_reports_large.png" alt="Reports icon" />
      <div class="label">Reports</div>
    </a>

    <!-- Burayı blueprint'e bağladım -->
    <a class="card" href="{{ url_for('datasources.list_datasources') }}">
      <img src="/static/img/icon_datasources_large.png" alt="Data Sources icon" />
      <div class="label">Data Sources</div>
    </a>

    {% if current_role == 'admin' %}
      <a class="card" href="{{ url_for('users.list_users') }}">
        <img src="/static/img/icon_users_large.png" alt="Users icon" />
        <div class="label">Users</div>
      </a>
    {% endif %}

    <a class="card" href="/help">
      <img src="/static/img/icon_help_large.png" alt="Help icon" />
      <div class="label">Help</div>
    </a>
  </section>
{% endblock %}
